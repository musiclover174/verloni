'use strict';(function(){window.xs=window.innerWidth<=1024?true:false;window.mobile=window.innerWidth<=480?true:false;window.xsHeight=window.innerHeight<=540?true:false;window.touch=document.querySelector('html').classList.contains('touchevents');window.animation={};window.animation.fadeIn=function(elem,ms,cb){var d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'block';if(!elem)return;elem.style.opacity=0;elem.style.display=d;if(ms){var opacity=0;var timer=setInterval(function(){opacity+=50/ms;if(opacity>=1){clearInterval(timer);opacity=1;if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=1;if(cb)cb()}};window.animation.fadeOut=function(elem,ms,cb){if(!elem)return;elem.style.opacity=1;if(ms){var opacity=1;var timer=setInterval(function(){opacity-=50/ms;if(opacity<=0){clearInterval(timer);opacity=0;elem.style.display='none';if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=0;elem.style.display='none';if(cb)cb()}};window.animation.scrollTo=function(to,duration){if(duration<=0)return;var element=document.documentElement,difference=to-element.scrollTop,perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;window.animation.scrollTo(to,duration-10)},10)};window.animation.visChecker=function(el){var rect=el.getBoundingClientRect();return(//rect.top >= 0 &&
//rect.left >= 0 &&
rect.bottom-el.offsetHeight*.35<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth))};window.verloni={};window.verloni.form={init:function init(){var _th=this,inputs=document.querySelectorAll('.common__input, .common__textarea'),forms=document.querySelectorAll('form'),selectors=document.querySelectorAll('.js-select'),choicesArr=[],digitsInput=document.querySelectorAll('.js-digits');$('.js-phone').mask('+7(999) 999-9999');function emptyCheck(event){event.target.value.trim()===''?event.target.classList.remove('notempty'):event.target.classList.add('notempty')}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=inputs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var item=_step.value;item.addEventListener('keyup',emptyCheck);item.addEventListener('blur',emptyCheck)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(document.querySelectorAll('.js-common-file').length){var commonFile=document.querySelectorAll('.js-common-fileinput'),commonFileDelete=document.querySelectorAll('.js-common-filedelete');var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{var _loop=function _loop(){var fileInp=_step2.value;fileInp.addEventListener('change',function(e){var el=fileInp.nextElementSibling,path=fileInp.value.split('\\'),pathName=path[path.length-1].split('');pathName.length>=30?pathName=pathName.slice(0,28).join('')+'...':pathName=pathName.join('');el.textContent=pathName;el.classList.add('choosed')})};for(var _iterator2=commonFile[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){_loop()}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{var _loop2=function _loop2(){var fileDelete=_step3.value;fileDelete.addEventListener('click',function(e){var el=fileDelete.previousElementSibling,fileInput=fileDelete.previousElementSibling.previousElementSibling;el.textContent=el.getAttribute('data-default');fileInput.value='';el.classList.remove('choosed')})};for(var _iterator3=commonFileDelete[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){_loop2()}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{var _loop3=function _loop3(){var form=_step4.value;form.addEventListener('submit',function(e){return!_th.checkForm(form)&&e.preventDefault()&&e.stopPropagation()})};for(var _iterator4=forms[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){_loop3()}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=selectors[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var selector=_step5.value;var choice=new Choices(selector,{searchEnabled:false,itemSelectText:'',position:'bottom'});choicesArr.push(choice)}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=digitsInput[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var digitInput=_step6.value;digitInput.addEventListener('keydown',function(e){var validArr=[46,8,9,27,13,110,190];if(validArr.indexOf(e.keyCode)!==-1||e.keyCode==65&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==67&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==88&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode>=35&&e.keyCode<=39){return}if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}})}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}return this},checkForm:function checkForm(form){var checkResult=true;var warningElems=form.querySelectorAll('.warning');if(warningElems.length){var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=warningElems[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var warningElem=_step7.value;warningElem.classList.remove('warning')}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=form.querySelectorAll('input, textarea, select')[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var elem=_step8.value;if(elem.getAttribute('data-req')){switch(elem.getAttribute('data-type')){case'tel':var re=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(!re.test(elem.value)){elem.classList.add('warning');checkResult=false}break;case'email':var re=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!re.test(elem.value)){elem.classList.add('warning');checkResult=false}break;case'select':if(elem.nextSibling.querySelector('.choices__item').getAttribute('data-value')=='-1'){elem.parentNode.classList.add('warning');checkResult=false}break;case'file':if(elem.value.trim()===''){elem.parentNode.classList.add('warning');checkResult=false}break;default:if(elem.value.trim()===''){elem.classList.add('warning');checkResult=false}break;}}}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=form.querySelectorAll('input[name^=agreement]')[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var item=_step9.value;if(!item.checked){item.classList.add('warning');checkResult=false}}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}return checkResult}}.init();window.verloni.obj={indexBannerCarousel:function indexBannerCarousel(){if(document.querySelector('.js-ibanner .swiper-wrapper').childElementCount<=1){document.querySelector('.js-ibanner').classList.add('--onechild')}var bannerSwiper=new Swiper('.js-ibanner',{loop:false,speed:800,slidesPerView:1,spaceBetween:0,parallax:true,navigation:{nextEl:'.js-ibanner ~ .swiper-buttons .swiper-button-next',prevEl:'.js-ibanner ~ .swiper-buttons .swiper-button-prev'},autoplay:{delay:5000}})},indexGalleryCarousel:function indexGalleryCarousel(){var gallerySwiper=new Swiper('.js-igal',{loop:true,loopedSlides:6,centeredSlides:true,speed:800,slidesPerView:'auto',spaceBetween:window.innerWidth<=960?-1:0,navigation:{nextEl:'.js-igal .swiper-button-next',prevEl:'.js-igal .swiper-button-prev'}})},indexDishes:function indexDishes(){var step=1;var spacers=document.querySelectorAll('.js-dishes-spacer'),positioner=document.querySelector('.js-dishes-positioner'),dishesOver=document.querySelector('.js-dishes'),positionHeight=parseInt(getComputedStyle(positioner)['height'])*1;var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=spacers[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var spacer=_step10.value;spacer.style.height=positionHeight+'px'}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return()}}finally{if(_didIteratorError10){throw _iteratorError10}}}window.addEventListener('scroll',function(){var dishesRect=dishesOver.getBoundingClientRect(),posRect=positioner.getBoundingClientRect(),wHeightHalf=(window.innerHeight||document.documentElement.clientHeight)/2,positionHeightHalf=positioner.offsetHeight/2;if(dishesRect.top+positionHeightHalf<=wHeightHalf){if(dishesRect.top+dishesOver.offsetHeight-positionHeightHalf-wHeightHalf>0){positioner.classList.remove('bottom');positioner.classList.add('fixed');//positioner.style.top = Math.abs(dishesRect.top + positionHeightHalf - wHeightHalf) + 'px'
}else{positioner.classList.remove('fixed');positioner.classList.add('bottom')}}else{positioner.classList.remove('fixed','bottom');positioner.removeAttribute('style')}});var controller=new ScrollMagic.Controller;// dishes scenes
var sceneDish1=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="1"]',duration:positionHeight}).setTween('.iabout__dishes-dish[data-step="1"]',1,{top:'-208px',ease:Linear.easeNone});var sceneDish2=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="2"]',duration:positionHeight}).setTween('.iabout__dishes-dish[data-step="2"]',1,{top:'0px',opacity:'1',ease:Linear.easeNone});var timelineDish3=new TimelineMax;var sceneDish3=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="3"]',duration:positionHeight*.7});timelineDish3.add([TweenMax.to('.iabout__dishes-dish[data-step="1"]',1,{top:'-290px',ease:Linear.easeNone}),TweenMax.to('.iabout__dishes-dish[data-step="2"]',1,{top:'-68px',ease:Linear.easeNone}),TweenMax.to('.iabout__dishes-dish[data-step="3"]',1,{top:'91px',opacity:'1',ease:Linear.easeNone})]);sceneDish3.setTween(timelineDish3);// features scenes
var timelineFeat1=new TimelineMax;var sceneFeat1=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="1"]',duration:positionHeight*.25,offset:positionHeight*.75});timelineFeat1.add([TweenMax.to('.iabout__verloni-value[data-step="1"]',1,{opacity:0,right:'20px',ease:Linear.easeNone}),TweenMax.to('.iabout__text-type[data-step="1"]',1,{opacity:0,left:'-20px',display:'none',ease:Linear.easeNone})]);sceneFeat1.setTween(timelineFeat1);var timelineFeat2=new TimelineMax;var sceneFeat2=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="2"]',duration:positionHeight*.25});timelineFeat2.add([TweenMax.to('.iabout__verloni-value[data-step="2"]',1,{opacity:1,right:'0px',ease:Linear.easeNone}),TweenMax.to('.iabout__text-type[data-step="2"]',1,{opacity:1,left:'0px',display:'block',ease:Linear.easeNone})]);sceneFeat2.setTween(timelineFeat2);var timelineFeat2Fade=new TimelineMax;var sceneFeat2Fade=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="2"]',duration:positionHeight*.25,offset:positionHeight*.75});timelineFeat2Fade.add([TweenMax.to('.iabout__verloni-value[data-step="2"]',1,{opacity:0,right:'20px',ease:Linear.easeNone}),TweenMax.to('.iabout__text-type[data-step="2"]',1,{opacity:0,left:'-20px',display:'none',ease:Linear.easeNone})]);sceneFeat2Fade.setTween(timelineFeat2Fade);var timelineFeat3=new TimelineMax;var sceneFeat3=new ScrollMagic.Scene({triggerElement:'.js-dishes-spacer[data-step="3"]',duration:positionHeight*.25});timelineFeat3.add([TweenMax.to('.iabout__verloni-value[data-step="3"]',1,{opacity:1,right:'0px',ease:Linear.easeNone}),TweenMax.to('.iabout__text-type[data-step="3"]',1,{opacity:1,left:'0px',display:'block',ease:Linear.easeNone})]);sceneFeat3.setTween(timelineFeat3);controller.addScene([sceneDish1,sceneDish2,sceneDish3,sceneFeat1,sceneFeat2,sceneFeat2Fade,sceneFeat3])},contactsMap:function contactsMap(){var coords=document.querySelector('.js-contacts-map').getAttribute('data-coords').split(','),myLatlng=new google.maps.LatLng(+coords[0],+coords[1]),mapOptions={zoom:17,center:myLatlng,disableDefaultUI:true};var map=new google.maps.Map(document.querySelector('.js-contacts-map'),mapOptions);var marker=new google.maps.Marker({position:myLatlng,//icon: 'static/i/pin.png'
icon:'/local/templates/.default/src/i/pin.png'});marker.setMap(map)},resizeWatcher:function resizeWatcher(){var tableSel=document.querySelectorAll('table'),scrollArray=[];if(tableSel.length){tableSel.forEach(function(item,i){var orgHtml=item.outerHTML,def='default';if(item.getAttribute('class'))def='';item.outerHTML='<div class=\'table-scroller'+i+' '+def+'\'>'+orgHtml+'</div>';var ps=new PerfectScrollbar('.table-scroller'+i,{wheelPropagation:true});scrollArray.push(ps)});window.addEventListener('resize',function(){if(scrollArray.length)scrollArray.forEach(function(item,i){item.update()})})}},progressUpdate:function progressUpdate(val){var progressEl=document.querySelector('.js-progress');progressEl.style.height=val+'%'},collectionsCars:function collectionsCars(){var headerEl=document.querySelector('.header'),bodyEl=document.querySelector('body'),carElemCount=document.querySelector('.js-collections .swiper-wrapper').children.length,hrefToSlide=document.querySelectorAll('.js-icollections-toslide');var toNextCollection=document.querySelector('.js-coltonext');var carVertSwiper=new Swiper('.js-collections',{speed:1500,direction:'vertical',slidesPerView:1,spaceBetween:-1,mousewheel:{releaseOnEdges:true},allowTouchMove:window.xs&&window.touch});carVertSwiper.on('slideChangeTransitionStart',function(){if(toNextCollection){toNextCollection.parentNode.removeChild(toNextCollection);toNextCollection=false}if(this.activeIndex){headerEl.classList.add('hidden');window.verloni.obj.progressUpdate(Math.floor((this.activeIndex+1)*100/carElemCount))}else{headerEl.classList.remove('hidden');window.verloni.obj.progressUpdate(0)}});var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{var _loop4=function _loop4(){var item=_step11.value;item.addEventListener('click',function(){var type=item.getAttribute('data-type'),slideIndex=$('.js-collections .swiper-slide[data-slide="'+type+'"]').index();carVertSwiper.slideTo(slideIndex,1500)})};for(var _iterator11=hrefToSlide[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){_loop4()}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return()}}finally{if(_didIteratorError11){throw _iteratorError11}}}var hash=window.location.hash;if(hash){hash=hash.substr(1);var slideIndex=$('.js-collections .swiper-slide[data-slide="'+hash+'"]').index();carVertSwiper.slideTo(slideIndex,1500)}},collections:function collections(){var colItems=document.querySelectorAll('.js-icollections-btn');var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{var _loop5=function _loop5(){var colItem=_step12.value;colItem.addEventListener('click',function(e){if(colItem.classList.contains('active')){e.preventDefault();return}var tabId=colItem.getAttribute('data-type'),curTab=document.querySelector('.js-icollections-tab.active'),newTab=document.querySelector('.js-icollections-tab[data-type="'+tabId+'"]');document.querySelector('.js-icollections-btn.active').classList.remove('active');colItem.classList.add('active');window.animation.fadeOut(curTab,200,function(){curTab.classList.remove('active');window.animation.fadeIn(newTab,200,function(){newTab.classList.add('active')})});e.preventDefault()})};for(var _iterator12=colItems[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){_loop5()}}catch(err){_didIteratorError12=true;_iteratorError12=err}finally{try{if(!_iteratorNormalCompletion12&&_iterator12.return){_iterator12.return()}}finally{if(_didIteratorError12){throw _iteratorError12}}}},asyncScroll:function asyncScroll(){if(window.mobile)return false;var featElems=document.querySelectorAll('.js-async-scroll');var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=featElems[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var _item2=_step13.value;_item2.setAttribute('data-top',parseInt(getComputedStyle(_item2)['top']))}}catch(err){_didIteratorError13=true;_iteratorError13=err}finally{try{if(!_iteratorNormalCompletion13&&_iterator13.return){_iterator13.return()}}finally{if(_didIteratorError13){throw _iteratorError13}}}window.addEventListener('scroll',function(){var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=featElems[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _item=_step14.value;var rect=_item.getBoundingClientRect(),diff=rect.bottom-_item.offsetHeight-(window.innerHeight||document.documentElement.clientHeight),dataKoef=_item.getAttribute('data-koef'),dataTop=_item.getAttribute('data-top');if(diff<=0&&rect.top+_item.offsetHeight>=0){_item.style.top=dataTop-diff*dataKoef+'px'}}}catch(err){_didIteratorError14=true;_iteratorError14=err}finally{try{if(!_iteratorNormalCompletion14&&_iterator14.return){_iterator14.return()}}finally{if(_didIteratorError14){throw _iteratorError14}}}})},whereList:function whereList(){var btn=document.querySelector('.js-where-more'),hiddenCols=document.querySelectorAll('.where__adresses-col.hidden');btn.addEventListener('click',function(e){var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=hiddenCols[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var hiddenCol=_step15.value;window.animation.fadeIn(hiddenCol,400)}}catch(err){_didIteratorError15=true;_iteratorError15=err}finally{try{if(!_iteratorNormalCompletion15&&_iterator15.return){_iterator15.return()}}finally{if(_didIteratorError15){throw _iteratorError15}}}window.animation.fadeOut(btn,400);e.preventDefault()})},changerFunction:function changerFunction(elem,newsrc){window.animation.fadeOut(elem,300,function(){elem.setAttribute('src',newsrc);elem.onload=function(){window.animation.fadeIn(elem,300)}})},changeImageSrc:function changeImageSrc(){var colorChangers=document.querySelectorAll('.js-info-color'),cardChangers=document.querySelectorAll('.js-card-thumb'),colorImg=document.querySelector('.js-info-img'),cardImg=document.querySelector('.js-card-mainimg');var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{var _loop6=function _loop6(){var colorChanger=_step16.value;colorChanger.addEventListener('click',function(){if(!colorChanger.classList.contains('active')){window.verloni.obj.changerFunction(colorImg,colorChanger.getAttribute('data-src'));var _iteratorNormalCompletion18=true;var _didIteratorError18=false;var _iteratorError18=undefined;try{for(var _iterator18=colorChangers[Symbol.iterator](),_step18;!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=true){var temp=_step18.value;temp.classList.remove('active')}}catch(err){_didIteratorError18=true;_iteratorError18=err}finally{try{if(!_iteratorNormalCompletion18&&_iterator18.return){_iterator18.return()}}finally{if(_didIteratorError18){throw _iteratorError18}}}colorChanger.classList.add('active')}})};for(var _iterator16=colorChangers[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){_loop6()}}catch(err){_didIteratorError16=true;_iteratorError16=err}finally{try{if(!_iteratorNormalCompletion16&&_iterator16.return){_iterator16.return()}}finally{if(_didIteratorError16){throw _iteratorError16}}}if(cardChangers){var changersSwiper=new Swiper('.js-card-thumbs',{speed:800,slidesPerView:5,spaceBetween:10,navigation:{nextEl:'.js-card-thumbs .swiper-button-next',prevEl:'.js-card-thumbs .swiper-button-prev'},breakpoints:{500:{slidesPerView:3},1640:{slidesPerView:4}}})}var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{var _loop7=function _loop7(){var cardChanger=_step17.value;cardChanger.addEventListener('click',function(){if(!cardChanger.classList.contains('active')){window.verloni.obj.changerFunction(cardImg,cardChanger.getAttribute('data-src'));var _iteratorNormalCompletion19=true;var _didIteratorError19=false;var _iteratorError19=undefined;try{for(var _iterator19=cardChangers[Symbol.iterator](),_step19;!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=true){var temp=_step19.value;temp.classList.remove('active')}}catch(err){_didIteratorError19=true;_iteratorError19=err}finally{try{if(!_iteratorNormalCompletion19&&_iterator19.return){_iterator19.return()}}finally{if(_didIteratorError19){throw _iteratorError19}}}cardChanger.classList.add('active')}})};for(var _iterator17=cardChangers[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){_loop7()}}catch(err){_didIteratorError17=true;_iteratorError17=err}finally{try{if(!_iteratorNormalCompletion17&&_iterator17.return){_iterator17.return()}}finally{if(_didIteratorError17){throw _iteratorError17}}}},cardFancy:function cardFancy(){var cardOverImg=document.querySelector('.js-card-fancy'),cardBigImg=cardOverImg.firstElementChild,cardFancyHref=document.querySelectorAll('.card__gallery-href');cardOverImg.addEventListener('click',function(e){for(var i=0;i<cardFancyHref.length;i++){if(cardBigImg.getAttribute('src')==cardFancyHref[i].getAttribute('href')){cardFancyHref[i].click();break}}e.preventDefault()});$('.card__gallery-href').fancybox({buttons:['close'],smallBtn:false,loop:true,afterLoad:function afterLoad(instance){instance.$refs.container[0].classList.add('fancybox-container--gallery')},afterClose:function afterClose(instance){instance.$refs.container[0].classList.remove('fancybox-container--gallery')},gutter:50,hash:false,thumbs:{autoStart:true,hideOnClose:true,parentEl:'.fancybox-container',axis:'x'},lang:'ru',i18n:{ru:{CLOSE:'\u0417\u0430\u043A\u0440\u044B\u0442\u044C',NEXT:'\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439',PREV:'\u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439'}}})},init:function init(){var burgerEl=document.querySelector('.js-burger'),html=document.querySelector('html'),headerEl=document.querySelector('.header'),toNext=document.querySelector('.js-tonext'),toNextCollection=document.querySelector('.js-coltonext'),elemsToCheck=['.news__elem-imgover','.js-scroll-imgover','.about__steps-elem'],cardNavBtn=document.querySelector('.js-card-nav-btn'),cardNav=document.querySelector('.js-card-nav'),cardToggleSublist=document.querySelectorAll('.js-card-toggle-sublist');burgerEl.addEventListener('click',function(e){html.classList.toggle('burgeropen');if(burgerEl.classList.contains('open')){burgerEl.classList.add('remove');setTimeout(function(){burgerEl.classList.remove('open','remove')},1000)}else{burgerEl.classList.add('open')}e.preventDefault()});if(cardNavBtn){cardNavBtn.addEventListener('click',function(e){if(!cardNavBtn.classList.contains('active')){cardNavBtn.classList.add('active');cardNav.classList.add('show')}else{cardNavBtn.classList.remove('active');cardNav.classList.remove('show')}e.preventDefault()})}var sidebar=void 0;function sideBarInit(){if(document.querySelector('.collections')){sidebar=new StickySidebar('.collections__side',{topSpacing:120,bottomSpacing:20,containerSelector:'.collections',innerWrapperSelector:'.js-card-nav'})}else{sidebar=new StickySidebar('.js-side-parent',{topSpacing:120,bottomSpacing:20,containerSelector:'.js-side-container',innerWrapperSelector:'.js-card-nav'})}}window.addEventListener('resize',function(){if(window.innerWidth<1100){if(sidebar){sidebar.destroy();sidebar=null}}else if(!sidebar&&document.querySelectorAll('.js-card-nav').length){sideBarInit()}});if(cardToggleSublist){var _loop8=function _loop8(i){cardToggleSublist[i].addEventListener('click',function(e){if(!cardToggleSublist[i].parentNode.classList.contains('card__nav-item--open-sublist')){cardToggleSublist[i].parentNode.classList.add('card__nav-item--open-sublist')}else{cardToggleSublist[i].parentNode.classList.remove('card__nav-item--open-sublist')}setTimeout(function(){sidebar.updateSticky()},600);e.preventDefault()})};for(var i=0;i<cardToggleSublist.length;i++){_loop8(i)}}if(toNext){toNext.addEventListener('click',function(e){window.animation.scrollTo(document.querySelector('.idishes').offsetTop,1000);e.preventDefault()})}if(toNextCollection){toNextCollection.addEventListener('click',function(e){var mySwiper=document.querySelector('.js-collections').swiper;mySwiper.slideNext();toNextCollection.parentNode.removeChild(toNextCollection);e.preventDefault()})}if(document.querySelector('.js-ibanner'))this.indexBannerCarousel();if(document.querySelector('.js-igal'))this.indexGalleryCarousel();if(document.querySelector('.js-contacts-map'))this.contactsMap();if(document.querySelector('.js-async-scroll'))this.asyncScroll();if(document.querySelector('.js-icollections-btn'))this.collections();if(document.querySelector('.js-dishes'))this.indexDishes();if(document.querySelector('.js-where-more'))this.whereList();if(document.querySelector('.js-collections'))this.collectionsCars();if(document.querySelector('.js-card-fancy'))this.cardFancy();if(document.querySelectorAll('.js-info-color').length||document.querySelectorAll('.js-card-thumb').length)this.changeImageSrc();if(document.querySelectorAll('.js-text-fixed').length){var _iteratorNormalCompletion20=true;var _didIteratorError20=false;var _iteratorError20=undefined;try{for(var _iterator20=document.querySelectorAll('.js-text-fixed')[Symbol.iterator](),_step20;!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=true){var fixElem=_step20.value;fixElem.setAttribute('data-left',fixElem.getBoundingClientRect().left);fixElem.setAttribute('data-top',fixElem.getBoundingClientRect().top)}}catch(err){_didIteratorError20=true;_iteratorError20=err}finally{try{if(!_iteratorNormalCompletion20&&_iterator20.return){_iterator20.return()}}finally{if(_didIteratorError20){throw _iteratorError20}}}window.addEventListener('mousemove',function(event){var centerX=Math.round(window.innerWidth/2),centerY=Math.round(window.innerHeight/2),diffX=-(event.clientX-centerX)/centerX,diffY=-(event.clientY-centerY)/centerY;var _iteratorNormalCompletion21=true;var _didIteratorError21=false;var _iteratorError21=undefined;try{for(var _iterator21=document.querySelectorAll('.js-text-fixed')[Symbol.iterator](),_step21;!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=true){var fixElem=_step21.value;TweenMax.to(fixElem,1,{'left':fixElem.getAttribute('data-left')-Math.round(fixElem.getAttribute('data-round')*diffX),'top':fixElem.getAttribute('data-top')-Math.round(fixElem.getAttribute('data-round')*diffY),ease:Expo.easeOut})}}catch(err){_didIteratorError21=true;_iteratorError21=err}finally{try{if(!_iteratorNormalCompletion21&&_iterator21.return){_iterator21.return()}}finally{if(_didIteratorError21){throw _iteratorError21}}}});window.addEventListener('resize',function(){var _iteratorNormalCompletion22=true;var _didIteratorError22=false;var _iteratorError22=undefined;try{for(var _iterator22=document.querySelectorAll('.js-text-fixed')[Symbol.iterator](),_step22;!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=true){var fixElem=_step22.value;fixElem.removeAttribute('style');fixElem.setAttribute('data-left',fixElem.getBoundingClientRect().left);fixElem.setAttribute('data-top',fixElem.getBoundingClientRect().top)}}catch(err){_didIteratorError22=true;_iteratorError22=err}finally{try{if(!_iteratorNormalCompletion22&&_iterator22.return){_iterator22.return()}}finally{if(_didIteratorError22){throw _iteratorError22}}}})}window.addEventListener('resize',function(){window.xs=window.innerWidth<=960?true:false;window.mobile=window.innerWidth<=480?true:false;window.xsHeight=window.innerHeight<=540?true:false});window.addEventListener('scroll',function(){var _iteratorNormalCompletion23=true;var _didIteratorError23=false;var _iteratorError23=undefined;try{for(var _iterator23=elemsToCheck[Symbol.iterator](),_step23;!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=true){var _item3=_step23.value;var _iteratorNormalCompletion24=true;var _didIteratorError24=false;var _iteratorError24=undefined;try{for(var _iterator24=document.querySelectorAll(_item3)[Symbol.iterator](),_step24;!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=true){var elem=_step24.value;if(window.animation.visChecker(elem)){elem.classList.add('visible')}}}catch(err){_didIteratorError24=true;_iteratorError24=err}finally{try{if(!_iteratorNormalCompletion24&&_iterator24.return){_iterator24.return()}}finally{if(_didIteratorError24){throw _iteratorError24}}}}}catch(err){_didIteratorError23=true;_iteratorError23=err}finally{try{if(!_iteratorNormalCompletion23&&_iterator23.return){_iterator23.return()}}finally{if(_didIteratorError23){throw _iteratorError23}}}});this.resizeWatcher();//objectFitImages()
var eventResize=void 0;try{eventResize=new Event('resize')}catch(e){eventResize=document.createEvent('Event');var doesnt_bubble=false,isnt_cancelable=false;eventResize.initEvent('resize',doesnt_bubble,isnt_cancelable)}window.dispatchEvent(eventResize);var eventScroll=void 0;try{eventScroll=new Event('scroll')}catch(e){eventScroll=document.createEvent('Event');var _doesnt_bubble=false,_isnt_cancelable=false;eventScroll.initEvent('scroll',_doesnt_bubble,_isnt_cancelable)}window.dispatchEvent(eventScroll);return this}};var firstLoad=true;Pace.on('hide',function(){if(firstLoad){firstLoad=false;setTimeout(function(){window.verloni.obj.init()},200)}})})();